<div class="container mx-auto px-4 sm:px-8 py-8">
  <h2 class="text-2xl font-semibold leading-tight">Trip Management</h2>

  <div class="my-4 p-4 bg-white rounded-lg shadow-sm border border-gray-200">
    <div class="flex flex-col md:flex-row gap-4">
      <div class="flex items-center gap-2 flex-grow">
        <label for="driverIdInput" class="font-medium text-gray-700">Driver ID:</label>
        <input id="driverIdInput" type="number" placeholder="Enter Driver ID" [(ngModel)]="driverId" class="border p-2 rounded-md w-full md:w-auto">
        <button (click)="fetchTripsByDriver()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition" [disabled]="isLoading">
          Find by Driver
        </button>
      </div>
      <div class="flex items-center gap-2 flex-grow">
        <label for="tripDateInput" class="font-medium text-gray-700">Trip Date:</label>
        <input id="tripDateInput" type="date" [(ngModel)]="tripDate" class="border p-2 rounded-md w-full md:w-auto">
        <button (click)="fetchTripsByDate()" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition" [disabled]="isLoading">
          Find by Date
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center py-10">
    <p>Loading trips...</p>
  </div>
  <p *ngIf="errorMessage && !isLoading" class="text-red-500 bg-red-100 p-3 rounded-md">{{ errorMessage }}</p>

  <div *ngIf="!isLoading" class="overflow-x-auto relative shadow-md sm:rounded-lg mt-6">
    <table class="w-full text-sm text-left text-gray-500">
      <thead class="text-xs text-gray-700 uppercase bg-gray-50">
        <tr>
          <th scope="col" class="py-3 px-6">Trip ID</th>
          <th scope="col" class="py-3 px-6">Customer</th>
          <th scope="col" class="py-3 px-6">Driver</th>
          <th scope="col" class="py-3 px-6">From</th>
          <th scope="col" class="py-3 px-6">To</th>
          <th scope="col" class="py-3 px-6">Status</th>
          <th scope="col" class="py-3 px-6">Bill</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let trip of trips" class="bg-white border-b hover:bg-gray-50">
          <td class="py-4 px-6 font-medium text-gray-900">{{ trip.tripBookingId }}</td>
          <td class="py-4 px-6">{{ trip.customer.username }} (ID: {{trip.customer.id}})</td>
          <td class="py-4 px-6">{{ trip.driver.username }} (ID: {{trip.driver.id}})</td>
          <td class="py-4 px-6">{{ trip.fromLocation }}</td>
          <td class="py-4 px-6">{{ trip.toLocation }}</td>
          <td class="py-4 px-6">{{ trip.status }}</td>
          <td class="py-4 px-6">â‚¹{{ trip.bill | number:'1.2-2' }}</td>
        </tr>
         <tr *ngIf="trips.length === 0">
            <td colspan="7" class="text-center py-10 text-gray-500">
                <p>No trips found for the selected criteria.</p>
            </td>
          </tr>
      </tbody>
    </table>
  </div>
</div>